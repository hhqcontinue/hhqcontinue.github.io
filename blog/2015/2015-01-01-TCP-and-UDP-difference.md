---
layout: post
title:  "TCP字节流和UDP数据报区别"
date:   '2015-01-01'
tags: blog
author: hoohack
categories: 计算机网络
---

两者的区别在于TCP接收的是一堆数据，而每次取多少由主机决定;而UDP发的是数据报，客户发送多少就接收多少。

拥有这些区别的原因是由于TCP和UDP的特性不同而决定的。TCP是面向连接的，也就是说，在连接持续的过程中，socket中收到的数据都是由同一台主机发出的，因此，知道保证数据是有序的到达就行了，至于每次读取多少数据自己看着办。
而UDP是无连接的协议，也就是说，只要知道接收端的IP和端口，且网络是可达的，任何主机都可以向接收端发送数据。这时候，如果一次能读取超过一个报文的数据，则会乱套。比如，主机A向发送了报文P1，主机B发送了报文P2，如果能够读取超过一个报文的数据，那么就会将P1和P2的数据合并在了一起，这样的数据是没有意义的。

#两个协议的其他区别

##TCP(Transmission Control Protocol)传输控制协议
TCP是面向连接的、可靠的流协议。流就是指不间断的数据结构。TCP为提供可靠性传输，实行“顺序控制”或“重发控制”机制。此外还具备“流控制（流量控制）”、“拥塞控制”、提高网络利用率等众多功能。
此外，TCP作为一种面向有连接的协议，只有在确认通信对端存在才会发送数据，从而可以控制通信流量的浪费。

##UDP (User Datagram Protocol) 用户数据报协议
UDP是不具有可靠性的数据报协议。细微的处理它会交给上层的应用去完成。在UDP的情况下，虽然可以确保发送信息的大小，却不能保证信息一定会到达。因此，应用有时会根据自己的需要进行重发处理。
UDP不提供复杂的控制机制，利用IP提供面向无连接的通信服务。由于UDP面向无连接，它可以随时发送数据。再加上UDP本身的处理既简单又高效，因此经常用于以下方面：
> * 包总量较少的通信(DNS、SNMP等)
> * 视频、音频等多媒体通信(即时通信)
> * 限定于LAN等特定网络中的应用通信
> * 广播通信(广播、多播)

##TCP和UDP区分使用
可能有人会认为，鉴于TCP是可靠的传输协议，那么它一定优于UDP。其实不然。TCP和UDP的优缺点无法简单地、绝对地去做比较。那么，对这两种协议应该如何加以区分使用呢？下面做一简单说明。

TCP用于在传输层有必要实现可靠传输的情况。由于它是面向有连接并具备顺序控制、重发控制等机制的，所以它可以为应用提供可靠传输。

而在一方面，UDP主要用于那些对高速传输和实时性有较高要求的通信或广播通信。举一个IP电话进行通话的例子。如果使用TCP，数据在传送途中如果丢失会被重发，但这样无法流畅地传输通话人的声音，
会导致无法进行正常交流。而采用UDP，它不会进行重发处理。从而也就不会有声音大幅度延迟到达的问题。即使有部分数据丢失，也只是会影响某一小部分的通话。此外，
在多播与广播通信中也使用UDP而不是TCP。
因此，TCI和UDP应该根据应用的目的按需使用。
